# ğŸ® ëª¨ë¸ ì‹¤í–‰ ë° ì„¤ì • ê°€ì´ë“œ (Execution & Configuration Guide)

ì´ ë¬¸ì„œëŠ” **PyTorch Lightning CLI**ë¥¼ ì‚¬ìš©í•˜ì—¬ í•™ìŠµ(Training)ì„ ì‹œì‘í•˜ê³ , YAML íŒŒì¼ ë° í„°ë¯¸ë„ ì˜µì…˜ìœ¼ë¡œ ëª¨ë¸ì„ ì œì–´í•˜ëŠ” ë°©ë²•ì„ ì„¤ëª…í•©ë‹ˆë‹¤.

---

## ğŸš€ 1. í•™ìŠµ ì‹œì‘í•˜ê¸° (Basic Execution)

ê°€ì¥ ê¸°ë³¸ì´ ë˜ëŠ” ì‹¤í–‰ ë°©ì‹ì€ ë¯¸ë¦¬ ì¤€ë¹„ëœ `configs/ic_conv_tasnet.yaml` ì„¤ì •ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.

```bash
uv run python3 main.py fit --config configs/ic_conv_tasnet.yaml
```

- **`fit`**: ëª¨ë¸ í•™ìŠµì„ ì‹œì‘í•˜ëŠ” ëª…ë ¹ì–´ì…ë‹ˆë‹¤.
- **`--config`**: ì‚¬ìš©í•  í™˜ê²½ ì„¤ì • íŒŒì¼ì˜ ê²½ë¡œë¥¼ ì§€ì •í•©ë‹ˆë‹¤.

---

## ğŸ› ï¸ 2. YAML ì„¤ì • íŒŒì¼ ì´í•´í•˜ê¸°

`configs/ic_conv_tasnet.yaml`ì€ í”„ë¡œì íŠ¸ì˜ ëª¨ë“  ì„¤ì •ì„ ë‹´ê³  ìˆìŠµë‹ˆë‹¤. ì£¼ìš” ì„¹ì…˜ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

### ğŸ± Data (ë°ì´í„° ì¤€ë¹„ ë¶€ì„œ)
```yaml
data:
  class_path: src.data.SEDataModule
  init_args:
    batch_size: 4       # í•œ ë²ˆì— ì²˜ë¦¬í•  ë°ì´í„° ë¬¶ìŒ í¬ê¸°
    num_workers: 8      # ë°ì´í„° ë¡œë”©ì— ì‚¬ìš©í•  CPU ì½”ì–´ ìˆ˜
    target_sr: 16000    # ëª¨ë¸ì´ ì‚¬ìš©í•  ìƒ˜í”Œ ë ˆì´íŠ¸ (16kHz)
```

### ğŸ§  Model (í•™ìŠµ ë¡œì§ ë¶€ì„œ)
```yaml
model:
  class_path: src.modules.se_module.SEModule
  init_args:
    target_type: "aligned_dry" # í•™ìŠµ ëª©í‘œ (ì”í–¥ ì œê±°: aligned_dry, ë‹¨ìˆœ ì†ŒìŒ ì œê±°: spatialized)
    sample_rate: 16000         # ì˜¤ë””ì˜¤ ê²°ê³¼ë¬¼ ì €ì¥ ì‹œì˜ ìƒ˜í”Œ ë ˆì´íŠ¸
```

### âš¡ Trainer (í•™ìŠµ ì—”ì§„ ë¶€ì„œ)
```yaml
trainer:
  max_epochs: 50              # ì´ í•™ìŠµ ë°˜ë³µ íšŸìˆ˜
  accelerator: "gpu"          # GPU ì‚¬ìš© ì—¬ë¶€
  devices: 1                  # ì‚¬ìš©í•  GPU ê°œìˆ˜
  precision: "16-mixed"       # í•™ìŠµ ì •ë°€ë„ (ë©”ëª¨ë¦¬ ì ˆì•½í˜•)
  check_val_every_n_epoch: 1  # ëª‡ ì—í­ë§ˆë‹¤ ê²€ì¦(Validation)ì„ í• ì§€
```

---

## âš¡ 3. YAML ìˆ˜ì • ì—†ì´ ì˜µì…˜ ë®ì–´ì“°ê¸° (CLI Override)

í•™ìŠµì„ ì‹œì‘í•  ë•Œ YAML íŒŒì¼ì„ ë§¤ë²ˆ ìˆ˜ì •í•˜ì§€ ì•Šê³ , í„°ë¯¸ë„ ëª…ë ¹ì–´ ë’¤ì— ì˜µì…˜ì„ ë¶™ì—¬ì„œ ì„¤ì •ì„ ë°”ê¿€ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### ğŸ§ª í…ŒìŠ¤íŠ¸ ëª¨ë“œ (Smoke Test)
ë°ì´í„°ë¥¼ ì•„ì£¼ ì¡°ê¸ˆë§Œ ì¨ì„œ ì „ì²´ íŒŒì´í”„ë¼ì¸(í•™ìŠµ -> ê²€ì¦ -> ì˜¤ë””ì˜¤ ì €ì¥)ì´ ì˜ ì‘ë™í•˜ëŠ”ì§€ ë³´ê³  ì‹¶ì„ ë•Œ ìœ ìš©í•©ë‹ˆë‹¤.

```bash
uv run python3 main.py fit \
    --config configs/ic_conv_tasnet.yaml \
    --trainer.limit_train_batches 100 \
    --trainer.limit_val_batches 10 \
    --trainer.max_epochs 1
```

- **`--trainer.limit_train_batches`**: ì „ì²´ ë°ì´í„°ì…‹ ëŒ€ì‹  ëª…ì‹œí•œ ë°°ì¹˜ë§Œí¼ë§Œ í•™ìŠµí•©ë‹ˆë‹¤.
- **`--data.batch_size`**: ë°°ì¹˜ ì‚¬ì´ì¦ˆë„ ë°”ë¡œ ë°”ê¿€ ìˆ˜ ìˆìŠµë‹ˆë‹¤. (ì˜ˆ: `--data.batch_size 16`)

---

## ğŸ“Š 4. í•™ìŠµ ìƒíƒœ í™•ì¸ (Monitoring)

í•™ìŠµ ì¤‘ì—ëŠ” **MLFlow**ë¥¼ í†µí•´ ê²°ê³¼ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

1. í„°ë¯¸ë„ì—ì„œ ì„œë²„ ì‹¤í–‰: `mlflow ui`
2. ì›¹ ë¸Œë¼ìš°ì € ì£¼ì†Œ: `http://localhost:5000` ì ‘ì†
3. **í™•ì¸ ê°€ëŠ¥í•œ í•­ëª©**:
   - **Metrics**: Loss ê·¸ë˜í”„ê°€ ë–¨ì–´ì§€ëŠ” ì–‘ìƒ
   - **Artifacts**: `audio_samples/` í´ë” ë‚´ì˜ ì¶”ë¡  ì˜¤ë””ì˜¤ íŒŒì¼ë“¤ (.wav)

---
**ìµœì¢… ìˆ˜ì •ì¼**: 2026-02-05
